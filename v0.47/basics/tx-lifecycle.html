<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v0.47 plugin-docs plugin-id-default docs-doc-id-basics/tx-lifecycle">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Transaction Lifecycle | Cosmos SDK</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.cosmos.network/img/banner.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.cosmos.network/img/banner.jpg"><meta data-rh="true" property="og:url" content="https://docs.cosmos.network/v0.47/basics/tx-lifecycle"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v0.47"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v0.47"><meta data-rh="true" name="docsearch:version" content="v0.47"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v0.47"><meta data-rh="true" property="og:title" content="Transaction Lifecycle | Cosmos SDK"><meta data-rh="true" name="description" content="This document describes the lifecycle of a transaction from creation to committed state changes. Transaction definition is described in a different doc. The transaction is referred to as Tx."><meta data-rh="true" property="og:description" content="This document describes the lifecycle of a transaction from creation to committed state changes. Transaction definition is described in a different doc. The transaction is referred to as Tx."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.cosmos.network/v0.47/basics/tx-lifecycle"><link data-rh="true" rel="alternate" href="https://docs.cosmos.network/v0.47/basics/tx-lifecycle" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.cosmos.network/v0.47/basics/tx-lifecycle" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QLS2QSP47E-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Cosmos SDK" href="/opensearch.xml">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51029217-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.e98ee2b8.css">
<link rel="preload" href="/assets/js/runtime~main.375ada2f.js" as="script">
<link rel="preload" href="/assets/js/main.e8d6e5a5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.cosmos.network" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo-sdk.svg" alt="Cosmos SDK Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-sdk.svg" alt="Cosmos SDK Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Cosmos SDK</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/v0.47">v0.47</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/main/basics/tx-lifecycle">Next</a></li><li><a class="dropdown__link" href="/v0.50/basics/tx-lifecycle">v0.50</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v0.47/basics/tx-lifecycle">v0.47</a></li><li><a href="https://docs.cosmos.network/v0.46/" target="_self" rel="noopener noreferrer" class="dropdown__link">v0.46<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://docs.cosmos.network/v0.45/" target="_self" rel="noopener noreferrer" class="dropdown__link">v0.45<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cosmos/cosmos-sdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="github-icon">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 0.300049C5.4 0.300049 0 5.70005 0 12.3001C0 17.6001 3.4 22.1001 8.2 23.7001C8.8 23.8001 9 23.4001 9 23.1001C9 22.8001 9 22.1001 9 21.1001C5.7 21.8001 5 19.5001 5 19.5001C4.5 18.1001 3.7 17.7001 3.7 17.7001C2.5 17.0001 3.7 17.0001 3.7 17.0001C4.9 17.1001 5.5 18.2001 5.5 18.2001C6.6 20.0001 8.3 19.5001 9 19.2001C9.1 18.4001 9.4 17.9001 9.8 17.6001C7.1 17.3001 4.3 16.3001 4.3 11.7001C4.3 10.4001 4.8 9.30005 5.5 8.50005C5.5 8.10005 5 6.90005 5.7 5.30005C5.7 5.30005 6.7 5.00005 9 6.50005C10 6.20005 11 6.10005 12 6.10005C13 6.10005 14 6.20005 15 6.50005C17.3 4.90005 18.3 5.30005 18.3 5.30005C19 7.00005 18.5 8.20005 18.4 8.50005C19.2 9.30005 19.6 10.4001 19.6 11.7001C19.6 16.3001 16.8 17.3001 14.1 17.6001C14.5 18.0001 14.9 18.7001 14.9 19.8001C14.9 21.4001 14.9 22.7001 14.9 23.1001C14.9 23.4001 15.1 23.8001 15.7 23.7001C20.5 22.1001 23.9 17.6001 23.9 12.3001C24 5.70005 18.6 0.300049 12 0.300049Z" fill="currentColor"/>
            </svg>
            </a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.47">Cosmos SDK Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/intro/overview">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/v0.47/basics/app-anatomy">Basics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.47/basics/app-anatomy">Anatomy of a Cosmos SDK Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v0.47/basics/tx-lifecycle">Transaction Lifecycle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.47/basics/query-lifecycle">Query Lifecycle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.47/basics/accounts">Accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.47/basics/gas-fees">Gas and Fees</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/core/baseapp">Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/building-modules/intro">Building Modules</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/building-apps/app-go">Building Apps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/run-node/keyring">Running a Node, API and CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/migrations/intro">SDK Migrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/modules">SDK Modules</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/ecosystem">Ecosystem</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/tooling">Tooling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/architecture">ADRs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.47/spec">Specifications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a href="https://tutorials.cosmos.network" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true">Resources</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://tutorials.cosmos.network" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://pkg.go.dev/github.com/cosmos/cosmos-sdk" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">SDK API Reference<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://docs.cosmos.network/swagger/" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">REST API Spec<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://discord.gg/cosmosnetwork" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">Basics</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Transaction Lifecycle</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v0.47</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Transaction Lifecycle</h1><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Synopsis</div><div class="admonitionContent_S0QG"><p>This document describes the lifecycle of a transaction from creation to committed state changes. Transaction definition is described in a <a href="/v0.47/core/transactions">different doc</a>. The transaction is referred to as <code>Tx</code>.</p></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Pre-requisite Readings</div><div class="admonitionContent_S0QG"><ul><li><a href="/v0.47/basics/app-anatomy">Anatomy of a Cosmos SDK Application</a></li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creation">Creation<a href="#creation" class="hash-link" aria-label="Direct link to Creation" title="Direct link to Creation">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-creation">Transaction Creation<a href="#transaction-creation" class="hash-link" aria-label="Direct link to Transaction Creation" title="Direct link to Transaction Creation">​</a></h3><p>One of the main application interfaces is the command-line interface. The transaction <code>Tx</code> can be created by the user inputting a command in the following format from the <a href="/v0.47/core/cli">command-line</a>, providing the type of transaction in <code>[command]</code>, arguments in <code>[args]</code>, and configurations such as gas prices in <code>[flags]</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">appname</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> tx </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">flags</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command automatically <strong>creates</strong> the transaction, <strong>signs</strong> it using the account&#x27;s private key, and <strong>broadcasts</strong> it to the specified peer node.</p><p>There are several required and optional flags for transaction creation. The <code>--from</code> flag specifies which <a href="/v0.47/basics/accounts">account</a> the transaction is originating from. For example, if the transaction is sending coins, the funds are drawn from the specified <code>from</code> address.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="gas-and-fees">Gas and Fees<a href="#gas-and-fees" class="hash-link" aria-label="Direct link to Gas and Fees" title="Direct link to Gas and Fees">​</a></h4><p>Additionally, there are several <a href="/v0.47/core/cli">flags</a> users can use to indicate how much they are willing to pay in <a href="/v0.47/basics/gas-fees">fees</a>:</p><ul><li><code>--gas</code> refers to how much <a href="/v0.47/basics/gas-fees">gas</a>, which represents computational resources, <code>Tx</code> consumes. Gas is dependent on the transaction and is not precisely calculated until execution, but can be estimated by providing <code>auto</code> as the value for <code>--gas</code>.</li><li><code>--gas-adjustment</code> (optional) can be used to scale <code>gas</code> up in order to avoid underestimating. For example, users can specify their gas adjustment as 1.5 to use 1.5 times the estimated gas.</li><li><code>--gas-prices</code> specifies how much the user is willing to pay per unit of gas, which can be one or multiple denominations of tokens. For example, <code>--gas-prices=0.025uatom, 0.025upho</code> means the user is willing to pay 0.025uatom AND 0.025upho per unit of gas.</li><li><code>--fees</code> specifies how much in fees the user is willing to pay in total.</li><li><code>--timeout-height</code> specifies a block timeout height to prevent the tx from being committed past a certain height.</li></ul><p>The ultimate value of the fees paid is equal to the gas multiplied by the gas prices. In other words, <code>fees = ceil(gas * gasPrices)</code>. Thus, since fees can be calculated using gas prices and vice versa, the users specify only one of the two.</p><p>Later, validators decide whether or not to include the transaction in their block by comparing the given or calculated <code>gas-prices</code> to their local <code>min-gas-prices</code>. <code>Tx</code> is rejected if its <code>gas-prices</code> is not high enough, so users are incentivized to pay more.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cli-example">CLI Example<a href="#cli-example" class="hash-link" aria-label="Direct link to CLI Example" title="Direct link to CLI Example">​</a></h4><p>Users of the application <code>app</code> can enter the following command into their CLI to generate a transaction to send 1000uatom from a <code>senderAddress</code> to a <code>recipientAddress</code>. The command specifies how much gas they are willing to pay: an automatic estimate scaled up by 1.5 times, with a gas price of 0.025uatom per unit gas.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">appd tx send </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">recipientAddress</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> 1000uatom --from </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">senderAddress</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --gas auto --gas-adjustment </span><span class="token number" style="color:#36acaa">1.5</span><span class="token plain"> --gas-prices </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">.025uatom</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-transaction-creation-methods">Other Transaction Creation Methods<a href="#other-transaction-creation-methods" class="hash-link" aria-label="Direct link to Other Transaction Creation Methods" title="Direct link to Other Transaction Creation Methods">​</a></h4><p>The command-line is an easy way to interact with an application, but <code>Tx</code> can also be created using a <a href="/v0.47/core/grpc_rest">gRPC or REST interface</a> or some other entry point defined by the application developer. From the user&#x27;s perspective, the interaction depends on the web interface or wallet they are using (e.g. creating <code>Tx</code> using <a href="https://lunie.io/#/" target="_blank" rel="noopener noreferrer">Lunie.io</a> and signing it with a Ledger Nano S).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="addition-to-mempool">Addition to Mempool<a href="#addition-to-mempool" class="hash-link" aria-label="Direct link to Addition to Mempool" title="Direct link to Addition to Mempool">​</a></h2><p>Each full-node (running CometBFT) that receives a <code>Tx</code> sends an <a href="https://docs.cometbft.com/v0.37/spec/p2p/messages/" target="_blank" rel="noopener noreferrer">ABCI message</a>,
<code>CheckTx</code>, to the application layer to check for validity, and receives an <code>abci.ResponseCheckTx</code>. If the <code>Tx</code> passes the checks, it is held in the node&#x27;s
<a href="https://docs.cometbft.com/v0.37/spec/p2p/messages/mempool/" target="_blank" rel="noopener noreferrer"><strong>Mempool</strong></a>, an in-memory pool of transactions unique to each node, pending inclusion in a block - honest nodes discard a <code>Tx</code> if it is found to be invalid. Prior to consensus, nodes continuously check incoming transactions and gossip them to their peers.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="types-of-checks">Types of Checks<a href="#types-of-checks" class="hash-link" aria-label="Direct link to Types of Checks" title="Direct link to Types of Checks">​</a></h3><p>The full-nodes perform stateless, then stateful checks on <code>Tx</code> during <code>CheckTx</code>, with the goal to
identify and reject an invalid transaction as early on as possible to avoid wasted computation.</p><p><strong><em>Stateless</em></strong> checks do not require nodes to access state - light clients or offline nodes can do
them - and are thus less computationally expensive. Stateless checks include making sure addresses
are not empty, enforcing nonnegative numbers, and other logic specified in the definitions.</p><p><strong><em>Stateful</em></strong> checks validate transactions and messages based on a committed state. Examples
include checking that the relevant values exist and can be transacted with, the address
has sufficient funds, and the sender is authorized or has the correct ownership to transact.
At any given moment, full-nodes typically have <a href="/v0.47/core/baseapp#state-updates">multiple versions</a>
of the application&#x27;s internal state for different purposes. For example, nodes execute state
changes while in the process of verifying transactions, but still need a copy of the last committed
state in order to answer queries - they should not respond using state with uncommitted changes.</p><p>In order to verify a <code>Tx</code>, full-nodes call <code>CheckTx</code>, which includes both <em>stateless</em> and <em>stateful</em>
checks. Further validation happens later in the <a href="#delivertx"><code>DeliverTx</code></a> stage. <code>CheckTx</code> goes
through several steps, beginning with decoding <code>Tx</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="decoding">Decoding<a href="#decoding" class="hash-link" aria-label="Direct link to Decoding" title="Direct link to Decoding">​</a></h3><p>When <code>Tx</code> is received by the application from the underlying consensus engine (e.g. CometBFT ), it is still in its <a href="/v0.47/core/encoding">encoded</a> <code>[]byte</code> form and needs to be unmarshaled in order to be processed. Then, the <a href="/v0.47/core/baseapp#runtx-antehandler-runmsgs-posthandler"><code>runTx</code></a> function is called to run in <code>runTxModeCheck</code> mode, meaning the function runs all checks but exits before executing messages and writing state changes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validatebasic">ValidateBasic<a href="#validatebasic" class="hash-link" aria-label="Direct link to ValidateBasic" title="Direct link to ValidateBasic">​</a></h3><p>Messages (<a href="/v0.47/core/transactions#messages"><code>sdk.Msg</code></a>) are extracted from transactions (<code>Tx</code>). The <code>ValidateBasic</code> method of the <code>sdk.Msg</code> interface implemented by the module developer is run for each transaction.
To discard obviously invalid messages, the <code>BaseApp</code> type calls the <code>ValidateBasic</code> method very early in the processing of the message in the <a href="/v0.47/core/baseapp#checktx"><code>CheckTx</code></a> and <a href="/v0.47/core/baseapp#delivertx"><code>DeliverTx</code></a> transactions.
<code>ValidateBasic</code> can include only <strong>stateless</strong> checks (the checks that do not require access to the state). </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="guideline">Guideline<a href="#guideline" class="hash-link" aria-label="Direct link to Guideline" title="Direct link to Guideline">​</a></h4><p>Gas is not charged when <code>ValidateBasic</code> is executed, so we recommend only performing all necessary stateless checks to enable middleware operations (for example, parsing the required signer accounts to validate a signature by a middleware) and stateless sanity checks not impacting performance of the <code>CheckTx</code> phase.
Other validation operations must be performed when <a href="/v0.47/building-modules/msg-services#Validation">handling a message</a> in a module Msg Server.</p><p>For example, if the message is to send coins from one address to another, <code>ValidateBasic</code> likely checks for non-empty addresses and a non-negative coin amount, but does not require knowledge of state such as the account balance of an address.</p><p>See also <a href="/v0.47/building-modules/msg-services#Validation">Msg Service Validation</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="antehandler">AnteHandler<a href="#antehandler" class="hash-link" aria-label="Direct link to AnteHandler" title="Direct link to AnteHandler">​</a></h3><p>After the <code>ValidateBasic</code> checks, the <code>AnteHandler</code>s are run. Technically, they are optional, but in practice, they are very often present to perform signature verification, gas calculation, fee deduction, and other core operations related to blockchain transactions.</p><p>A copy of the cached context is provided to the <code>AnteHandler</code>, which performs limited checks specified for the transaction type. Using a copy allows the <code>AnteHandler</code> to do stateful checks for <code>Tx</code> without modifying the last committed state, and revert back to the original if the execution fails.</p><p>For example, the <a href="https://github.com/cosmos/cosmos-sdk/tree/main/x/auth/spec" target="_blank" rel="noopener noreferrer"><code>auth</code></a> module <code>AnteHandler</code> checks and increments sequence numbers, checks signatures and account numbers, and deducts fees from the first signer of the transaction - all state changes are made using the <code>checkState</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gas">Gas<a href="#gas" class="hash-link" aria-label="Direct link to Gas" title="Direct link to Gas">​</a></h3><p>The <a href="/v0.47/core/context"><code>Context</code></a>, which keeps a <code>GasMeter</code> that tracks how much gas is used during the execution of <code>Tx</code>, is initialized. The user-provided amount of gas for <code>Tx</code> is known as <code>GasWanted</code>. If <code>GasConsumed</code>, the amount of gas consumed during execution, ever exceeds <code>GasWanted</code>, the execution stops and the changes made to the cached copy of the state are not committed. Otherwise, <code>CheckTx</code> sets <code>GasUsed</code> equal to <code>GasConsumed</code> and returns it in the result. After calculating the gas and fee values, validator-nodes check that the user-specified <code>gas-prices</code> is greater than their locally defined <code>min-gas-prices</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="discard-or-addition-to-mempool">Discard or Addition to Mempool<a href="#discard-or-addition-to-mempool" class="hash-link" aria-label="Direct link to Discard or Addition to Mempool" title="Direct link to Discard or Addition to Mempool">​</a></h3><p>If at any point during <code>CheckTx</code> the <code>Tx</code> fails, it is discarded and the transaction lifecycle ends
there. Otherwise, if it passes <code>CheckTx</code> successfully, the default protocol is to relay it to peer
nodes and add it to the Mempool so that the <code>Tx</code> becomes a candidate to be included in the next block.</p><p>The <strong>mempool</strong> serves the purpose of keeping track of transactions seen by all full-nodes.
Full-nodes keep a <strong>mempool cache</strong> of the last <code>mempool.cache_size</code> transactions they have seen, as a first line of
defense to prevent replay attacks. Ideally, <code>mempool.cache_size</code> is large enough to encompass all
of the transactions in the full mempool. If the mempool cache is too small to keep track of all
the transactions, <code>CheckTx</code> is responsible for identifying and rejecting replayed transactions.</p><p>Currently existing preventative measures include fees and a <code>sequence</code> (nonce) counter to distinguish
replayed transactions from identical but valid ones. If an attacker tries to spam nodes with many
copies of a <code>Tx</code>, full-nodes keeping a mempool cache reject all identical copies instead of running
<code>CheckTx</code> on them. Even if the copies have incremented <code>sequence</code> numbers, attackers are
disincentivized by the need to pay fees.</p><p>Validator nodes keep a mempool to prevent replay attacks, just as full-nodes do, but also use it as
a pool of unconfirmed transactions in preparation of block inclusion. Note that even if a <code>Tx</code>
passes all checks at this stage, it is still possible to be found invalid later on, because
<code>CheckTx</code> does not fully validate the transaction (that is, it does not actually execute the messages).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="inclusion-in-a-block">Inclusion in a Block<a href="#inclusion-in-a-block" class="hash-link" aria-label="Direct link to Inclusion in a Block" title="Direct link to Inclusion in a Block">​</a></h2><p>Consensus, the process through which validator nodes come to agreement on which transactions to
accept, happens in <strong>rounds</strong>. Each round begins with a proposer creating a block of the most
recent transactions and ends with <strong>validators</strong>, special full-nodes with voting power responsible
for consensus, agreeing to accept the block or go with a <code>nil</code> block instead. Validator nodes
execute the consensus algorithm, such as <a href="https://docs.cometbft.com/v0.37/spec/consensus/" target="_blank" rel="noopener noreferrer">CometBFT</a>,
confirming the transactions using ABCI requests to the application, in order to come to this agreement.</p><p>The first step of consensus is the <strong>block proposal</strong>. One proposer amongst the validators is chosen
by the consensus algorithm to create and propose a block - in order for a <code>Tx</code> to be included, it
must be in this proposer&#x27;s mempool.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-changes">State Changes<a href="#state-changes" class="hash-link" aria-label="Direct link to State Changes" title="Direct link to State Changes">​</a></h2><p>The next step of consensus is to execute the transactions to fully validate them. All full-nodes
that receive a block proposal from the correct proposer execute the transactions by calling the ABCI functions
<a href="/v0.47/basics/app-anatomy#beginblocker-and-endblocker"><code>BeginBlock</code></a>, <code>DeliverTx</code> for each transaction,
and <a href="/v0.47/basics/app-anatomy#beginblocker-and-endblocker"><code>EndBlock</code></a>. While each full-node runs everything
locally, this process yields a single, unambiguous result, since the messages&#x27; state transitions are deterministic and transactions are
explicitly ordered in the block proposal.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |Receive Block Proposal|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | BeginBlock          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | DeliverTx(tx0)      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | DeliverTx(tx1)      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | DeliverTx(tx2)      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | DeliverTx(tx3)      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |   .         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |   .         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |   .         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | EndBlock        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | Consensus       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | Commit          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -----------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delivertx">DeliverTx<a href="#delivertx" class="hash-link" aria-label="Direct link to DeliverTx" title="Direct link to DeliverTx">​</a></h3><p>The <code>DeliverTx</code> ABCI function defined in <a href="/v0.47/core/baseapp"><code>BaseApp</code></a> does the bulk of the
state transitions: it is run for each transaction in the block in sequential order as committed
to during consensus. Under the hood, <code>DeliverTx</code> is almost identical to <code>CheckTx</code> but calls the
<a href="/v0.47/core/baseapp#runtx"><code>runTx</code></a> function in deliver mode instead of check mode.
Instead of using their <code>checkState</code>, full-nodes use <code>deliverState</code>:</p><ul><li><p><strong>Decoding:</strong> Since <code>DeliverTx</code> is an ABCI call, <code>Tx</code> is received in the encoded <code>[]byte</code> form.
Nodes first unmarshal the transaction, using the <a href="/v0.47/basics/app-anatomy#register-codec"><code>TxConfig</code></a> defined in the app, then call <code>runTx</code> in <code>runTxModeDeliver</code>, which is very similar to <code>CheckTx</code> but also executes and writes state changes.</p></li><li><p><strong>Checks and <code>AnteHandler</code>:</strong> Full-nodes call <code>validateBasicMsgs</code> and <code>AnteHandler</code> again. This second check
happens because they may not have seen the same transactions during the addition to Mempool stage
and a malicious proposer may have included invalid ones. One difference here is that the
<code>AnteHandler</code> does not compare <code>gas-prices</code> to the node&#x27;s <code>min-gas-prices</code> since that value is local
to each node - differing values across nodes yield nondeterministic results.</p></li><li><p><strong><code>MsgServiceRouter</code>:</strong> After <code>CheckTx</code> exits, <code>DeliverTx</code> continues to run
<a href="/v0.47/core/baseapp#runtx-antehandler-runmsgs-posthandler"><code>runMsgs</code></a> to fully execute each <code>Msg</code> within the transaction.
Since the transaction may have messages from different modules, <code>BaseApp</code> needs to know which module
to find the appropriate handler. This is achieved using <code>BaseApp</code>&#x27;s <code>MsgServiceRouter</code> so that it can be processed by the module&#x27;s Protobuf <a href="/v0.47/building-modules/msg-services"><code>Msg</code> service</a>.
For <code>LegacyMsg</code> routing, the <code>Route</code> function is called via the <a href="/v0.47/building-modules/module-manager">module manager</a> to retrieve the route name and find the legacy <a href="/v0.47/building-modules/msg-services#handler-type"><code>Handler</code></a> within the module.</p></li><li><p><strong><code>Msg</code> service:</strong> Protobuf <code>Msg</code> service is responsible for executing each message in the <code>Tx</code> and causes state transitions to persist in <code>deliverTxState</code>.</p></li><li><p><strong>PostHandlers:</strong> <a href="/v0.47/core/baseapp#posthandler"><code>PostHandler</code></a>s run after the execution of the message. If they fail, the state change of <code>runMsgs</code>, as well of <code>PostHandlers</code>, are both reverted.</p></li><li><p><strong>Gas:</strong> While a <code>Tx</code> is being delivered, a <code>GasMeter</code> is used to keep track of how much
gas is being used; if execution completes, <code>GasUsed</code> is set and returned in the
<code>abci.ResponseDeliverTx</code>. If execution halts because <code>BlockGasMeter</code> or <code>GasMeter</code> has run out or something else goes
wrong, a deferred function at the end appropriately errors or panics.</p></li></ul><p>If there are any failed state changes resulting from a <code>Tx</code> being invalid or <code>GasMeter</code> running out,
the transaction processing terminates and any state changes are reverted. Invalid transactions in a
block proposal cause validator nodes to reject the block and vote for a <code>nil</code> block instead.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="commit">Commit<a href="#commit" class="hash-link" aria-label="Direct link to Commit" title="Direct link to Commit">​</a></h3><p>The final step is for nodes to commit the block and state changes. Validator nodes
perform the previous step of executing state transitions in order to validate the transactions,
then sign the block to confirm it. Full nodes that are not validators do not
participate in consensus - i.e. they cannot vote - but listen for votes to understand whether or
not they should commit the state changes.</p><p>When they receive enough validator votes (2/3+ <em>precommits</em> weighted by voting power), full nodes commit to a new block to be added to the blockchain and
finalize the state transitions in the application layer. A new state root is generated to serve as
a merkle proof for the state transitions. Applications use the <a href="/v0.47/core/baseapp#commit"><code>Commit</code></a>
ABCI method inherited from <a href="/v0.47/core/baseapp">Baseapp</a>; it syncs all the state transitions by
writing the <code>deliverState</code> into the application&#x27;s internal state. As soon as the state changes are
committed, <code>checkState</code> starts afresh from the most recently committed state and <code>deliverState</code>
resets to <code>nil</code> in order to be consistent and reflect the changes.</p><p>Note that not all blocks have the same number of transactions and it is possible for consensus to
result in a <code>nil</code> block or one with none at all. In a public blockchain network, it is also possible
for validators to be <strong>byzantine</strong>, or malicious, which may prevent a <code>Tx</code> from being committed in
the blockchain. Possible malicious behaviors include the proposer deciding to censor a <code>Tx</code> by
excluding it from the block or a validator voting against the block.</p><p>At this point, the transaction lifecycle of a <code>Tx</code> is over: nodes have verified its validity,
delivered it by executing its state changes, and committed those changes. The <code>Tx</code> itself,
in <code>[]byte</code> form, is stored in a block and appended to the blockchain.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/v0.47/basics/app-anatomy"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Anatomy of a Cosmos SDK Application</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v0.47/basics/query-lifecycle"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Query Lifecycle</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creation" class="table-of-contents__link toc-highlight">Creation</a><ul><li><a href="#transaction-creation" class="table-of-contents__link toc-highlight">Transaction Creation</a></li></ul></li><li><a href="#addition-to-mempool" class="table-of-contents__link toc-highlight">Addition to Mempool</a><ul><li><a href="#types-of-checks" class="table-of-contents__link toc-highlight">Types of Checks</a></li><li><a href="#decoding" class="table-of-contents__link toc-highlight">Decoding</a></li><li><a href="#validatebasic" class="table-of-contents__link toc-highlight">ValidateBasic</a></li><li><a href="#antehandler" class="table-of-contents__link toc-highlight">AnteHandler</a></li><li><a href="#gas" class="table-of-contents__link toc-highlight">Gas</a></li><li><a href="#discard-or-addition-to-mempool" class="table-of-contents__link toc-highlight">Discard or Addition to Mempool</a></li></ul></li><li><a href="#inclusion-in-a-block" class="table-of-contents__link toc-highlight">Inclusion in a Block</a></li><li><a href="#state-changes" class="table-of-contents__link toc-highlight">State Changes</a><ul><li><a href="#delivertx" class="table-of-contents__link toc-highlight">DeliverTx</a></li><li><a href="#commit" class="table-of-contents__link toc-highlight">Commit</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://cosmos.network"><img src="/img/logo-bw.svg" alt="Cosmos Logo"></a></li></ul></div><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://hub.cosmos.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cosmos Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.cometbft.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">CometBFT<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ibc.cosmos.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBC Go<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.cosmos.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.cosmos.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/cosmosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://reddit.com/r/cosmosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/cosmosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/cosmos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/CosmosProject" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/cosmosproject" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p>The development of the Cosmos SDK is led primarily by <a href="https://interchain.io/ecosystem">Interchain Core Teams</a>. Funding for this development comes primarily from the Interchain Foundation, a Swiss non-profit.</p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.375ada2f.js"></script>
<script src="/assets/js/main.e8d6e5a5.js"></script>
</body>
</html>