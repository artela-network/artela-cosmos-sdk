"use strict";(self.webpackChunkcosmos_sdk_docs=self.webpackChunkcosmos_sdk_docs||[]).push([[5432],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),l=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),m=l(n),d=r,b=m["".concat(s,".").concat(d)]||m[d]||u[d]||a;return n?o.createElement(b,i(i({ref:t},p),{},{components:n})):o.createElement(b,i({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},16537:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var o=n(87462),r=(n(67294),n(3905));const a={sidebar_position:1},i="Object-Capability Model",c={unversionedId:"core/ocap",id:"core/ocap",title:"Object-Capability Model",description:"Intro",source:"@site/docs/core/10-ocap.md",sourceDirName:"core",slug:"/core/ocap",permalink:"/main/core/ocap",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Telemetry",permalink:"/main/core/telemetry"},next:{title:"RunTx recovery middleware",permalink:"/main/core/runtx_middleware"}},s={},l=[{value:"Intro",id:"intro",level:2},{value:"Ocaps in practice",id:"ocaps-in-practice",level:2}],p={toc:l};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"object-capability-model"},"Object-Capability Model"),(0,r.kt)("h2",{id:"intro"},"Intro"),(0,r.kt)("p",null,"When thinking about security, it is good to start with a specific threat model. Our threat model is the following:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"We assume that a thriving ecosystem of Cosmos SDK modules that are easy to compose into a blockchain application will contain faulty or malicious modules.")),(0,r.kt)("p",null,"The Cosmos SDK is designed to address this threat by being the\nfoundation of an object capability system."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The structural properties of object capability systems favor\nmodularity in code design and ensure reliable encapsulation in\ncode implementation."),(0,r.kt)("p",{parentName:"blockquote"},"These structural properties facilitate the analysis of some\nsecurity properties of an object-capability program or operating\nsystem. Some of these \u2014 in particular, information flow properties\n\u2014 can be analyzed at the level of object references and\nconnectivity, independent of any knowledge or analysis of the code\nthat determines the behavior of the objects."),(0,r.kt)("p",{parentName:"blockquote"},"As a consequence, these security properties can be established\nand maintained in the presence of new objects that contain unknown\nand possibly malicious code."),(0,r.kt)("p",{parentName:"blockquote"},"These structural properties stem from the two rules governing\naccess to existing objects:"),(0,r.kt)("ol",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ol"},"An object A can send a message to B only if object A holds a\nreference to B."),(0,r.kt)("li",{parentName:"ol"},'An object A can obtain a reference to C only\nif object A receives a message containing a reference to C. As a\nconsequence of these two rules, an object can obtain a reference\nto another object only through a preexisting chain of references.\nIn short, "Only connectivity begets connectivity."'))),(0,r.kt)("p",null,"For an introduction to object-capabilities, see this ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Object-capability_model"},"Wikipedia article"),"."),(0,r.kt)("h2",{id:"ocaps-in-practice"},"Ocaps in practice"),(0,r.kt)("p",null,"The idea is to only reveal what is necessary to get the work done."),(0,r.kt)("p",null,"For example, the following code snippet violates the object capabilities\nprinciple:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'type AppAccount struct {...}\naccount := &AppAccount{\n    Address: pub.Address(),\n    Coins: sdk.Coins{sdk.NewInt64Coin("ATM", 100)},\n}\nsumValue := externalModule.ComputeSumValue(account)\n')),(0,r.kt)("p",null,"The method ",(0,r.kt)("inlineCode",{parentName:"p"},"ComputeSumValue")," implies a pure function, yet the implied\ncapability of accepting a pointer value is the capability to modify that\nvalue. The preferred method signature should take a copy instead."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},"sumValue := externalModule.ComputeSumValue(*account)\n")),(0,r.kt)("p",null,"In the Cosmos SDK, you can see the application of this principle in simapp."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.50.0-alpha.0/simapp/app.go\n")),(0,r.kt)("p",null,"The following diagram shows the current dependencies between keepers."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/cosmos/cosmos-sdk/release/v0.46.x/docs/uml/svg/keeper_dependencies.svg",alt:"Keeper dependencies"})))}u.isMDXComponent=!0}}]);