"use strict";(self.webpackChunkcosmos_sdk_docs=self.webpackChunkcosmos_sdk_docs||[]).push([[8743],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>c});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(a),c=r,h=d["".concat(l,".").concat(c)]||d[c]||m[c]||o;return a?n.createElement(h,i(i({ref:t},p),{},{components:a})):n.createElement(h,i({ref:t},p))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<o;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},73192:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var n=a(87462),r=(a(67294),a(3905));const o={sidebar_position:1},i="x/authz",s={unversionedId:"modules/authz/README",id:"version-v0.47/modules/authz/README",title:"x/authz",description:"Abstract",source:"@site/versioned_docs/version-v0.47/modules/authz/README.md",sourceDirName:"modules/authz",slug:"/modules/authz/",permalink:"/v0.47/modules/authz/",draft:!1,tags:[],version:"v0.47",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"x/auth/tx",permalink:"/v0.47/modules/auth/tx"},next:{title:"x/bank",permalink:"/v0.47/modules/bank/"}},l={},u=[{value:"Abstract",id:"abstract",level:2},{value:"Contents",id:"contents",level:2},{value:"Concepts",id:"concepts",level:2},{value:"Authorization and Grant",id:"authorization-and-grant",level:3},{value:"Built-in Authorizations",id:"built-in-authorizations",level:3},{value:"GenericAuthorization",id:"genericauthorization",level:4},{value:"SendAuthorization",id:"sendauthorization",level:4},{value:"StakeAuthorization",id:"stakeauthorization",level:4},{value:"Gas",id:"gas",level:3},{value:"State",id:"state",level:2},{value:"Grant",id:"grant",level:3},{value:"GrantQueue",id:"grantqueue",level:3},{value:"Messages",id:"messages",level:2},{value:"MsgGrant",id:"msggrant",level:3},{value:"MsgRevoke",id:"msgrevoke",level:3},{value:"MsgExec",id:"msgexec",level:3},{value:"Events",id:"events",level:2},{value:"Client",id:"client",level:2},{value:"CLI",id:"cli",level:3},{value:"Query",id:"query",level:4},{value:"grants",id:"grants",level:5},{value:"Transactions",id:"transactions",level:4},{value:"exec",id:"exec",level:5},{value:"grant",id:"grant-1",level:5},{value:"revoke",id:"revoke",level:5},{value:"gRPC",id:"grpc",level:3},{value:"Grants",id:"grants-1",level:4},{value:"REST",id:"rest",level:3}],p={toc:u};function m(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"xauthz"},(0,r.kt)("inlineCode",{parentName:"h1"},"x/authz")),(0,r.kt)("h2",{id:"abstract"},"Abstract"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"x/authz")," is an implementation of a Cosmos SDK module, per ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/cosmos/cosmos-sdk/blob/main/docs/architecture/adr-030-authz-module.md"},"ADR 30"),", that allows\ngranting arbitrary privileges from one account (the granter) to another account (the grantee). Authorizations must be granted for a particular Msg service method one by one using an implementation of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," interface."),(0,r.kt)("h2",{id:"contents"},"Contents"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#concepts"},"Concepts"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#authorization-and-grant"},"Authorization and Grant")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#built-in-authorizations"},"Built-in Authorizations")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#gas"},"Gas")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#state"},"State"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#grant"},"Grant")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#grantqueue"},"GrantQueue")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#messages"},"Messages"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#msggrant"},"MsgGrant")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#msgrevoke"},"MsgRevoke")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#msgexec"},"MsgExec")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#events"},"Events")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#client"},"Client"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#cli"},"CLI")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#grpc"},"gRPC")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#rest"},"REST"))))),(0,r.kt)("h2",{id:"concepts"},"Concepts"),(0,r.kt)("h3",{id:"authorization-and-grant"},"Authorization and Grant"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"x/authz")," module defines interfaces and messages grant authorizations to perform actions\non behalf of one account to other accounts. The design is defined in the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/cosmos/cosmos-sdk/blob/main/docs/architecture/adr-030-authz-module.md"},"ADR 030"),"."),(0,r.kt)("p",null,"A ",(0,r.kt)("em",{parentName:"p"},"grant")," is an allowance to execute a Msg by the grantee on behalf of the granter.\nAuthorization is an interface that must be implemented by a concrete authorization logic to validate and execute grants. Authorizations are extensible and can be defined for any Msg service method even outside of the module where the Msg method is defined. See the ",(0,r.kt)("inlineCode",{parentName:"p"},"SendAuthorization")," example in the next section for more details."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," The authz module is different from the ",(0,r.kt)("a",{parentName:"p",href:"../modules/auth/"},"auth (authentication)")," module that is responsible for specifying the base transaction and account types."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/x/authz/authorizations.go#L11-L25\n")),(0,r.kt)("h3",{id:"built-in-authorizations"},"Built-in Authorizations"),(0,r.kt)("p",null,"The Cosmos SDK ",(0,r.kt)("inlineCode",{parentName:"p"},"x/authz")," module comes with following authorization types:"),(0,r.kt)("h4",{id:"genericauthorization"},"GenericAuthorization"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GenericAuthorization")," implements the ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," interface that gives unrestricted permission to execute the provided Msg on behalf of granter's account."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-protobuf",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/proto/cosmos/authz/v1beta1/authz.proto#L14-L22\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/x/authz/generic_authorization.go#L16-L29\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"msg")," stores Msg type URL.")),(0,r.kt)("h4",{id:"sendauthorization"},"SendAuthorization"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"SendAuthorization")," implements the ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," interface for the ",(0,r.kt)("inlineCode",{parentName:"p"},"cosmos.bank.v1beta1.MsgSend")," Msg."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"It takes a (positive) ",(0,r.kt)("inlineCode",{parentName:"li"},"SpendLimit")," that specifies the maximum amount of tokens the grantee can spend. The ",(0,r.kt)("inlineCode",{parentName:"li"},"SpendLimit")," is updated as the tokens are spent."),(0,r.kt)("li",{parentName:"ul"},"It takes an (optional) ",(0,r.kt)("inlineCode",{parentName:"li"},"AllowList")," that specifies to which addresses a grantee can send token.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-protobuf",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/proto/cosmos/bank/v1beta1/authz.proto#L11-L30\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/x/bank/types/send_authorization.go#L29-L62\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"spend_limit")," keeps track of how many coins are left in the authorization."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"allow_list")," specifies an optional list of addresses to whom the grantee can send tokens on behalf of the granter.")),(0,r.kt)("h4",{id:"stakeauthorization"},"StakeAuthorization"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"StakeAuthorization")," implements the ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," interface for messages in the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.cosmos.network/v0.44/modules/staking/"},"staking module"),". It takes an ",(0,r.kt)("inlineCode",{parentName:"p"},"AuthorizationType")," to specify whether you want to authorise delegating, undelegating or redelegating (i.e. these have to be authorised seperately). It also takes a required ",(0,r.kt)("inlineCode",{parentName:"p"},"MaxTokens")," that keeps track of a limit to the amount of tokens that can be delegated/undelegated/redelegated. If left empty, the amount is unlimited. Additionally, this Msg takes an ",(0,r.kt)("inlineCode",{parentName:"p"},"AllowList")," or a ",(0,r.kt)("inlineCode",{parentName:"p"},"DenyList"),", which allows you to select which validators you allow or deny grantees to stake with."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-protobuf",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/proto/cosmos/staking/v1beta1/authz.proto#L11-L35\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/x/staking/types/authz.go#L15-L35\n")),(0,r.kt)("h3",{id:"gas"},"Gas"),(0,r.kt)("p",null,"In order to prevent DoS attacks, granting ",(0,r.kt)("inlineCode",{parentName:"p"},"StakeAuthorization"),"s with ",(0,r.kt)("inlineCode",{parentName:"p"},"x/authz")," incurs gas. ",(0,r.kt)("inlineCode",{parentName:"p"},"StakeAuthorization")," allows you to authorize another account to delegate, undelegate, or redelegate to validators. The authorizer can define a list of validators they allow or deny delegations to. The Cosmos SDK iterates over these lists and charge 10 gas for each validator in both of the lists."),(0,r.kt)("p",null,"Since the state maintaining a list for granter, grantee pair with same expiration, we are iterating over the list to remove the grant (incase of any revoke of paritcular ",(0,r.kt)("inlineCode",{parentName:"p"},"msgType"),") from the list and we are charging 20 gas per iteration."),(0,r.kt)("h2",{id:"state"},"State"),(0,r.kt)("h3",{id:"grant"},"Grant"),(0,r.kt)("p",null,"Grants are identified by combining granter address (the address bytes of the granter), grantee address (the address bytes of the grantee) and Authorization type (its type URL). Hence we only allow one grant for the (granter, grantee, Authorization) triple."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Grant: ",(0,r.kt)("inlineCode",{parentName:"li"},"0x01 | granter_address_len (1 byte) | granter_address_bytes | grantee_address_len (1 byte) | grantee_address_bytes |  msgType_bytes -> ProtocolBuffer(AuthorizationGrant)"))),(0,r.kt)("p",null,"The grant object encapsulates an ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," type and an expiration timestamp:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-protobuf",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/proto/cosmos/authz/v1beta1/authz.proto#L24-L32\n")),(0,r.kt)("h3",{id:"grantqueue"},"GrantQueue"),(0,r.kt)("p",null,"We are maintaining a queue for authz pruning. Whenever a grant is created, an item will be added to ",(0,r.kt)("inlineCode",{parentName:"p"},"GrantQueue")," with a key of expiration, granter, grantee."),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},"EndBlock")," (which runs for every block) we continuously check and prune the expired grants by forming a prefix key with current blocktime that passed the stored expiration in ",(0,r.kt)("inlineCode",{parentName:"p"},"GrantQueue"),", we iterate through all the matched records from ",(0,r.kt)("inlineCode",{parentName:"p"},"GrantQueue")," and delete them from the ",(0,r.kt)("inlineCode",{parentName:"p"},"GrantQueue")," & ",(0,r.kt)("inlineCode",{parentName:"p"},"Grant"),"s store."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/5f4ddc6f80f9707320eec42182184207fff3833a/x/authz/keeper/keeper.go#L378-L403\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"GrantQueue: ",(0,r.kt)("inlineCode",{parentName:"li"},"0x02 | expiration_bytes | granter_address_len (1 byte) | granter_address_bytes | grantee_address_len (1 byte) | grantee_address_bytes -> ProtocalBuffer(GrantQueueItem)"))),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"expiration_bytes")," are the expiration date in UTC with the format ",(0,r.kt)("inlineCode",{parentName:"p"},'"2006-01-02T15:04:05.000000000"'),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/x/authz/keeper/keys.go#L77-L93\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"GrantQueueItem")," object contains the list of type urls between granter and grantee that expire at the time indicated in the key."),(0,r.kt)("h2",{id:"messages"},"Messages"),(0,r.kt)("p",null,"In this section we describe the processing of messages for the authz module."),(0,r.kt)("h3",{id:"msggrant"},"MsgGrant"),(0,r.kt)("p",null,"An authorization grant is created using the ",(0,r.kt)("inlineCode",{parentName:"p"},"MsgGrant")," message.\nIf there is already a grant for the ",(0,r.kt)("inlineCode",{parentName:"p"},"(granter, grantee, Authorization)")," triple, then the new grant overwrites the previous one. To update or extend an existing grant, a new grant with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"(granter, grantee, Authorization)")," triple should be created."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-protobuf",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/proto/cosmos/authz/v1beta1/tx.proto#L35-L45\n")),(0,r.kt)("p",null,"The message handling should fail if:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"both granter and grantee have the same address."),(0,r.kt)("li",{parentName:"ul"},"provided ",(0,r.kt)("inlineCode",{parentName:"li"},"Expiration")," time is less than current unix timestamp (but a grant will be created if no ",(0,r.kt)("inlineCode",{parentName:"li"},"expiration")," time is provided since ",(0,r.kt)("inlineCode",{parentName:"li"},"expiration")," is optional)."),(0,r.kt)("li",{parentName:"ul"},"provided ",(0,r.kt)("inlineCode",{parentName:"li"},"Grant.Authorization")," is not implemented."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Authorization.MsgTypeURL()")," is not defined in the router (there is no defined handler in the app router to handle that Msg types).")),(0,r.kt)("h3",{id:"msgrevoke"},"MsgRevoke"),(0,r.kt)("p",null,"A grant can be removed with the ",(0,r.kt)("inlineCode",{parentName:"p"},"MsgRevoke")," message."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-protobuf",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/proto/cosmos/authz/v1beta1/tx.proto#L69-L78\n")),(0,r.kt)("p",null,"The message handling should fail if:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"both granter and grantee have the same address."),(0,r.kt)("li",{parentName:"ul"},"provided ",(0,r.kt)("inlineCode",{parentName:"li"},"MsgTypeUrl")," is empty.")),(0,r.kt)("p",null,"NOTE: The ",(0,r.kt)("inlineCode",{parentName:"p"},"MsgExec")," message removes a grant if the grant has expired."),(0,r.kt)("h3",{id:"msgexec"},"MsgExec"),(0,r.kt)("p",null,"When a grantee wants to execute a transaction on behalf of a granter, they must send ",(0,r.kt)("inlineCode",{parentName:"p"},"MsgExec"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-protobuf",metastring:"reference",reference:!0},"https://github.com/cosmos/cosmos-sdk/blob/v0.47.0-rc1/proto/cosmos/authz/v1beta1/tx.proto#L52-L63\n")),(0,r.kt)("p",null,"The message handling should fail if:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"provided ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," is not implemented."),(0,r.kt)("li",{parentName:"ul"},"grantee doesn't have permission to run the transaction."),(0,r.kt)("li",{parentName:"ul"},"if granted authorization is expired.")),(0,r.kt)("h2",{id:"events"},"Events"),(0,r.kt)("p",null,"The authz module emits proto events defined in ",(0,r.kt)("a",{parentName:"p",href:"https://buf.build/cosmos/cosmos-sdk/docs/main/cosmos.authz.v1beta1#cosmos.authz.v1beta1.EventGrant"},"the Protobuf reference"),"."),(0,r.kt)("h2",{id:"client"},"Client"),(0,r.kt)("h3",{id:"cli"},"CLI"),(0,r.kt)("p",null,"A user can query and interact with the ",(0,r.kt)("inlineCode",{parentName:"p"},"authz")," module using the CLI."),(0,r.kt)("h4",{id:"query"},"Query"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"query")," commands allow users to query ",(0,r.kt)("inlineCode",{parentName:"p"},"authz")," state."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"simd query authz --help\n")),(0,r.kt)("h5",{id:"grants"},"grants"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"grants")," command allows users to query grants for a granter-grantee pair. If the message type URL is set, it selects grants only for that message type."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"simd query authz grants [granter-addr] [grantee-addr] [msg-type-url]? [flags]\n")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"simd query authz grants cosmos1.. cosmos1.. /cosmos.bank.v1beta1.MsgSend\n")),(0,r.kt)("p",null,"Example Output:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'grants:\n- authorization:\n    \'@type\': /cosmos.bank.v1beta1.SendAuthorization\n    spend_limit:\n    - amount: "100"\n      denom: stake\n  expiration: "2022-01-01T00:00:00Z"\npagination: null\n')),(0,r.kt)("h4",{id:"transactions"},"Transactions"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"tx")," commands allow users to interact with the ",(0,r.kt)("inlineCode",{parentName:"p"},"authz")," module."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"simd tx authz --help\n")),(0,r.kt)("h5",{id:"exec"},"exec"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"exec")," command allows a grantee to execute a transaction on behalf of granter."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"  simd tx authz exec [tx-json-file] --from [grantee] [flags]\n")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"simd tx authz exec tx.json --from=cosmos1..\n")),(0,r.kt)("h5",{id:"grant-1"},"grant"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"grant")," command allows a granter to grant an authorization to a grantee."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'simd tx authz grant <grantee> <authorization_type="send"|"generic"|"delegate"|"unbond"|"redelegate"> --from <granter> [flags]\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"simd tx authz grant cosmos1.. send --spend-limit=100stake --from=cosmos1..\n")),(0,r.kt)("h5",{id:"revoke"},"revoke"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"revoke")," command allows a granter to revoke an authorization from a grantee."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"simd tx authz revoke [grantee] [msg-type-url] --from=[granter] [flags]\n")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"simd tx authz revoke cosmos1.. /cosmos.bank.v1beta1.MsgSend --from=cosmos1..\n")),(0,r.kt)("h3",{id:"grpc"},"gRPC"),(0,r.kt)("p",null,"A user can query the ",(0,r.kt)("inlineCode",{parentName:"p"},"authz")," module using gRPC endpoints."),(0,r.kt)("h4",{id:"grants-1"},"Grants"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Grants")," endpoint allows users to query grants for a granter-grantee pair. If the message type URL is set, it selects grants only for that message type."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cosmos.authz.v1beta1.Query/Grants\n")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'grpcurl -plaintext \\\n    -d \'{"granter":"cosmos1..","grantee":"cosmos1..","msg_type_url":"/cosmos.bank.v1beta1.MsgSend"}\' \\\n    localhost:9090 \\\n    cosmos.authz.v1beta1.Query/Grants\n')),(0,r.kt)("p",null,"Example Output:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'{\n  "grants": [\n    {\n      "authorization": {\n        "@type": "/cosmos.bank.v1beta1.SendAuthorization",\n        "spendLimit": [\n          {\n            "denom":"stake",\n            "amount":"100"\n          }\n        ]\n      },\n      "expiration": "2022-01-01T00:00:00Z"\n    }\n  ]\n}\n')),(0,r.kt)("h3",{id:"rest"},"REST"),(0,r.kt)("p",null,"A user can query the ",(0,r.kt)("inlineCode",{parentName:"p"},"authz")," module using REST endpoints."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"/cosmos/authz/v1beta1/grants\n")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl "localhost:1317/cosmos/authz/v1beta1/grants?granter=cosmos1..&grantee=cosmos1..&msg_type_url=/cosmos.bank.v1beta1.MsgSend"\n')),(0,r.kt)("p",null,"Example Output:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'{\n  "grants": [\n    {\n      "authorization": {\n        "@type": "/cosmos.bank.v1beta1.SendAuthorization",\n        "spend_limit": [\n          {\n            "denom": "stake",\n            "amount": "100"\n          }\n        ]\n      },\n      "expiration": "2022-01-01T00:00:00Z"\n    }\n  ],\n  "pagination": null\n}\n')))}m.isMDXComponent=!0}}]);